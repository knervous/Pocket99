<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.13.1: http://docutils.sourceforge.net/" />
<title>noesisGUI Documentation: Shaders</title>


    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="description" content="NoesisGUI Documentation"/>
    
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
    <link rel="shortcut icon" href="/favicon.ico">

    <!--script src="https://use.typekit.net/taq4txx.js"></script-->
    <!--script>try{Typekit.load({ async: true });}catch(e){}</script-->

    <link rel="stylesheet" href="style/noesis.css" type="text/css" media="all"/>

    <script type="text/javascript" src="/js/googleAnalytics.js?version=1.0"></script>
    <!--[if lt IE 7]><script src="http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js" type="text/javascript"></script><![endif]-->

    <script src="/js/vendor/modernizr.js"></script>


</head>
<body>
<div class="document" id="shaders">


    <!-- NOESIS WEB ------- BEGIN ------- -->

    <div class="developers documentation">

        <!--[if lt IE 9]>
        <script type="text/javascript" src="/js/vendor/selectivizr.js"></script>
        <script type="text/javascript" src="/js/vendor/respond.js"></script>
        <div class="old-browser-warning">
            You are using a very old browser.<br>
            To get the best possible experience using our website we recommend that you upgrade to a newer version or other web browser. <br>
            A list of the most popular web browsers <a href="http://browsehappy.com/">can be found here</a>
        </div>
        <![endif]-->

        <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
            <symbol id="svg-icon-social-vimeo" width="30" height="30" viewBox="-26 20 30 30">
                <path d="M-23,30.2c2.1-1.7,5.1-4.8,7.5-4.8c2.3,0,2.9,2.2,3.2,4.7c0.3,2.5,1.2,7.8,2.5,7.8 c1.2,0,4.1-4.7,3.9-6.6c-0.2-1.8-2.2-1.6-3.3-1c1-3.7,3.4-5.8,6.5-5.8c3.1,0,3.8,2.3,3.8,4.9c0,3.9-8.2,16-13.1,16 c-3.1,0-3.8-4.4-4.4-6.6c-0.6-2.2-1.8-7.9-3.3-8.3c-0.6-0.1-2.1,1.1-2.1,1.1L-23,30.2z"/>
            </symbol>
            <symbol id="svg-icon-social-google" width="30" height="30" viewBox="-25 24 30 30">
                <path d="M-6.3 45.9c0 1-.3 2-.8 2.8-1.7 2.9-5.2 3.9-8.3 3.9-2.5 0-5.5-.6-6.9-2.9-.4-.6-.6-1.4-.6-2.1 0-1.9 1.1-3.4 2.7-4.3 1.9-1.2 4.4-1.5 6.6-1.6-.6-.8-1-1.4-1-2.4 0-.5.1-.9.3-1.4-.4 0-.7.1-1.1.1-3.2 0-5.8-2.3-5.8-5.6 0-1.8.9-3.6 2.2-4.8 1.8-1.5 4.3-2.1 6.6-2.1h6.9l-2.3 1.4H-10c1.5 1.3 2.5 2.7 2.5 4.8 0 4.2-3.9 4.7-3.9 6.8 0 2 5.1 2.7 5.1 7.4zm-2.3 1.4c0-2.2-2.2-3.6-3.8-4.7h-.8c-2.7 0-6.6.9-6.6 4.2 0 3.2 3.5 4.3 6.1 4.3 2.4 0 5.1-1 5.1-3.8zm-2.8-11.5c.7-.7.9-1.6.9-2.6 0-2.4-1.4-6.5-4.4-6.5-.9 0-1.9.5-2.4 1.2-.6.7-.8 1.7-.8 2.6 0 2.5 1.4 6.3 4.3 6.3.8 0 1.8-.4 2.4-1zm14.4.9v1.8H-.5v3.6h-1.7v-3.6h-3.5v-1.8h3.5v-3.6h1.7v3.6H3z">
            </symbol>
            <symbol id="svg-icon-social-twitter" width="30" height="30" viewBox="-25 20 30 30">
                <path d="M.4 29.7v.7c0 7-5.3 15.1-15.1 15.1-3 0-5.8-.9-8.1-2.4.4 0 .8.1 1.3.1 2.5 0 4.8-.8 6.6-2.3-2.3 0-4.3-1.6-5-3.7.3 0 .7.1 1 .1.5 0 1-.1 1.4-.2-2.4-.5-4.2-2.6-4.2-5.2v-.1c.7.4 1.5.6 2.4.7-1.4-1-2.4-2.6-2.4-4.4 0-1 .3-1.9.7-2.7 2.6 3.2 6.5 5.3 10.9 5.5-.1-.4-.1-.8-.1-1.2 0-2.9 2.4-5.3 5.3-5.3 1.5 0 2.9.6 3.9 1.7 1.2-.2 2.3-.7 3.4-1.3C2 26 1.2 27.1.1 27.7c1.1-.1 2.1-.4 3.1-.8C2.4 28 1.4 29 .4 29.7z">
            </symbol>
            <symbol id="svg-icon-social-facebook" width="30" height="30" viewBox="-31 24 30 30">
                <path d="M-8.7 29.8h-2.6c-2 0-2.4 1-2.4 2.4v3.1h4.8l-.6 4.9h-4.2v12.5h-5V40.1h-4.2v-4.9h4.2v-3.6c0-4.2 2.5-6.4 6.2-6.4 1.8 0 3.3.1 3.7.2v4.4z">
            </symbol>
            <symbol id="svg-icon-social-youtube" width="30" height="30" viewBox="-26 25 30 30">
                <path d="M.9 52c-.3 1.3-1.4 2.2-2.6 2.4-3 .3-6.1.3-9.1.3s-6.1 0-9.1-.3c-1.3-.1-2.3-1.1-2.6-2.4-.5-1.9-.5-3.9-.5-5.8s0-3.9.4-5.7c.3-1.3 1.4-2.2 2.6-2.4 3-.3 6.1-.3 9.1-.3s6.1 0 9.1.3c1.3.1 2.3 1.1 2.6 2.4.4 1.8.4 3.8.4 5.7.1 1.9.1 3.9-.3 5.8zm-17-9.8v-1.5h-5.1v1.5h1.7v9.3h1.6v-9.3h1.8zm2.7-16.9l-2 6.5v4.4H-17v-4.4c-.1-.8-.5-2-1-3.5-.4-1-.7-2.1-1.1-3.1h1.7l1.2 4.3 1.1-4.3h1.7zm1.8 26.2v-8.1h-1.5v6.2c-.3.5-.6.7-.9.7-.2 0-.3-.1-.3-.3v-6.6h-1.5v6.4c0 .6 0 1 .1 1.2.1.4.5.6 1 .6s1.1-.3 1.7-1v.9h1.4zM-9 33.6c0 .9-.1 1.5-.5 1.9-.4.6-1 .8-1.7.8s-1.3-.3-1.7-.8c-.3-.4-.5-1.1-.5-1.9v-2.9c0-.9.1-1.5.5-1.9.4-.6 1-.8 1.7-.8.8 0 1.3.3 1.7.8.3.4.5 1 .5 1.9v2.9zm-1.5-3.1c0-.8-.2-1.1-.7-1.1-.5 0-.7.4-.7 1.1v3.4c0 .8.2 1.1.7 1.1.5 0 .7-.4.7-1.1v-3.4zM-6 45.8c0-.8 0-1.3-.1-1.6-.2-.6-.6-.9-1.2-.9-.5 0-1 .3-1.5.9v-3.6h-1.5v10.9h1.5v-.8c.5.6 1 .9 1.5.9.6 0 1-.3 1.2-.9.1-.3.1-.9.1-1.6v-3.3zm-1.5 3.4c0 .7-.2 1.1-.6 1.1-.2 0-.5-.1-.7-.4V45c.2-.2.5-.4.7-.4.4 0 .6.4.6 1.1v3.5zm4-12.9H-5v-.9c-.6.7-1.1 1-1.7 1-.5 0-.8-.2-1-.6-.1-.2-.1-.6-.1-1.2v-6.5h1.5v6.6c0 .2.1.4.3.4.3 0 .6-.2.9-.7v-6.2h1.5v8.1zm3 12.4H-2v1c-.1.4-.3.6-.7.6-.5 0-.8-.4-.8-1.1v-1.4h2.9V46c0-.9-.1-1.5-.4-1.9-.4-.6-1-.8-1.7-.8-.8 0-1.3.3-1.8.8-.3.4-.5 1-.5 1.9v2.8c0 .9.2 1.5.5 1.9.4.6 1 .8 1.8.8s1.4-.3 1.8-.9c.2-.3.3-.6.3-.9v-1zM-2 46.5h-1.5v-.8c0-.7.2-1.1.7-1.1s.8.4.8 1.1v.8z">
            </symbol>
            <symbol id="svg-icon-social-linkedin" width="30" height="30" viewBox="-26 25 30 30">
                <path d="M-22.6 51.3h5v-15h-5v15zm17.8-15.5c-2.2 0-3.5.8-4.8 2.6v-2.1h-5v15h5v-8.1c0-1.7.9-3.4 2.8-3.4 2 0 3.2 1.7 3.2 3.4v8.2h5v-8.5c0-6-4-7.1-6.2-7.1zM-20.1 29c-1.6 0-2.9 1.2-2.9 2.6 0 1.5 1.3 2.6 2.9 2.6 1.6 0 2.9-1.2 2.9-2.6.1-1.4-1.2-2.6-2.9-2.6z">
            </symbol>
            <symbol id="svg-scroll-down" width="48" height="48" viewBox="0 0 48 48">
                <path d="M24 1C11.3 1 1 11.3 1 24s10.3 23 23 23 23-10.3 23-23S36.7 1 24 1zm0 31.5L11.9 21.6l1.3-1.5L24 29.8l10.7-9.7 1.3 1.5-12 10.9z">
            </symbol>
        </svg>

        <header id="header" class="SOZO-header js-hide-nav">

            <div class="wrapper">

                <a href="/" class="logo animate-me" title="Noesis">
                    <img src="/images/logos/noesis-gui-logo.svg" alt="NoesisGUI">
                </a>

                <div class="user-management">
                    <iframe src="/includes/user.php" scrolling="no"></iframe>
                </div>

                <a title="Menu" href="/" class="mobile-menu" rel="nofollow">
                    <i class="burger-icon"></i>
                </a>

                <nav class="primary-nav site-nav" role="navigation">
                    <ul>
                        <li><a href="/" title="NoesisGUI Main Features"><span>features</span></a></li>
                        <li><a href="/licensing.php" title="NoesisGUI Licensing"><span>licensing</span></a></li>
                        <li class="has-children"><a data-id="child-nav" href="/forums" title="NoesisGUI Developer Resources" class="js-mobile-2nd-nav active"><span>developer</span></a>
                            <nav class="child-nav" id="child-nav">
                                <ul>
                                    <li><a href="/forums" title="NoesisGUI Forums">forums</a></li>
                                    <li><a href="/developers/samples.php" title="NoesisGUI Samples">samples</a></li>
                                    <li><a href="/developers/downloads.php" title="NoesisGUI Downloads">downloads</a></li>
                                    <li><a href="/docs/Gui.Core.Index.html" title="NoesisGUI Documentation" class="active">documentation</a></li>
                                    <li><a href="/docs/Gui.Core.Changelog.html" title="NoesisGUI Version Changelog">changelog</a></li>
                                    <li><a href="https://bugs.noesisengine.com" target="_blank" rel="nofollow" title="NoesisGUI Bug Tracker">bugtracker</a></li>
                                    <li><a href="https://trello.com/b/ktVkZaBG/noesisgui" target="_blank" rel="nofollow" title="NoesisGUI Roadmap">roadmap</a></li>
                                </ul>
                            </nav>
                        </li>
                        <li><a href="/contact.php" title="Contact Information"><span>Contact</span></a></li>
                    </ul>
                </nav>

            </div>

        </header>

        <header id="doc-header">
            <img src="noesis-gui-logo.svg" alt="NoesisGUI">
        </header>

        <div class="main-content" role="main">

            <nav id="noesis-secondary-nav" class="secondary-nav site-nav js-hide-nav">
                <div class="wrapper">
                    <ul>
                        <li><a href="/forums" title="NoesisGUI Forums">forums</a></li>
                        <li><a href="/developers/samples.php" title="NoesisGUI Samples">samples</a></li>
                        <li><a href="/developers/downloads.php" title="NoesisGUI Downloads">downloads</a></li>
                        <li><a href="/docs/Gui.Core.Index.html" title="NoesisGUI Documentation" class="active">documentation</a></li>
                        <li><a href="/docs/Gui.Core.Changelog.html" title="NoesisGUI Version Changelog">changelog</a></li>
                        <li><a href="https://bugs.noesisengine.com" target="_blank" rel="nofollow" title="NoesisGUI Bug Tracker">bugtracker</a></li>
                        <li><a href="https://trello.com/b/ktVkZaBG/noesisgui" target="_blank" rel="nofollow" title="roadmap">roadmap</a></li>
                    </ul>
                </div>
            </nav>


            <div class="documentation-article">

                <div class="wrapper">

                    <div id="noesis_web_contenidosMain" class="noesis_web_contenidosMain sozo-content">
                        <div id="noesis_doc_wrap">

                            <div class="noesis_doc_header_menu">
                                <a href="Gui.Core.Index.html" class="noesis_doc_header_link">Documentation Index</a>
                            </div>

                            <div class="noesis_doc_content">

        <!-- NOESIS WEB ------- END ------- -->


<h1 class="title">Shaders</h1>

<p>RenderSystem does not directly expose an API for managing individual render states, vertex shaders, pixel shaders, geometry shaders, etc. Instead a portable concept of <strong>shader</strong> is exposed. In noesis the concept shader refers to a set of low-level shaders (vertex, pixel, etc) that offers a platform independent interface and that are implemented for each platform.</p>
<div class="section" id="shader-interface">
<h1>Shader Interface</h1>
<p>Shader interfaces are stored in .shader files.</p>
<p>The shader interface expose the set of properties that can be set in the shader. For example,</p>
<div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Type</span> <span class="o">=</span> <span class="n">Metal</span><span class="p">;</span> <span class="n">ZSlot</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="n">Desc</span> <span class="o">=</span> <span class="s">&quot;This is a test shader&quot;</span><span class="p">]</span>
<span class="n">Shader</span>
<span class="p">{</span>
    <span class="n">Properties</span>
    <span class="p">{</span>
        <span class="n">shared</span> <span class="n">Frame</span>
        <span class="p">{</span>
            <span class="kt">bool</span> <span class="n">b1</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">[</span><span class="n">Min</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">Max</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;]</span> <span class="kt">int</span> <span class="n">i1</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">i2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">};</span>
            <span class="kt">float</span> <span class="n">f1</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">;</span>
            <span class="kt">float</span> <span class="n">f2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">};</span>
            <span class="n">vector2</span> <span class="n">v2</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">};</span>
            <span class="n">vector3</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">};</span>
            <span class="n">vector4</span> <span class="n">v4</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">};</span>
            <span class="n">matrix3</span> <span class="n">m3</span> <span class="o">=</span> <span class="p">{</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">};</span>
            <span class="n">matrix4</span> <span class="n">m4</span> <span class="o">=</span> <span class="p">{</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">,</span>
                          <span class="mf">10.0</span><span class="p">,</span> <span class="mf">11.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">13.0</span><span class="p">,</span> <span class="mf">14.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">16.0</span><span class="p">};</span>
            <span class="n">transform3</span> <span class="n">t3</span> <span class="o">=</span> <span class="p">{</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span>
                             <span class="mf">11.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">};</span>
            <span class="n">rgba</span> <span class="n">color</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">};</span>
            <span class="n">texture</span> <span class="n">t0</span> <span class="o">=</span> <span class="s">&quot;Textures/Brick.texture.nsd&quot;</span><span class="p">;</span>
         <span class="p">}</span>

         <span class="n">Tweaks</span>
         <span class="p">{</span>
             <span class="p">[</span><span class="n">Desc</span> <span class="o">=</span> <span class="s">&quot;StepSize&quot;</span><span class="p">]</span> <span class="kt">float</span> <span class="n">step</span> <span class="o">=</span> <span class="mf">2.5</span><span class="p">;</span>
             <span class="p">[</span><span class="n">Desc</span> <span class="o">=</span> <span class="s">&quot;DiffuseColor&quot;</span><span class="p">]</span> <span class="n">rgba</span> <span class="n">diffuseColor</span> <span class="o">=</span> <span class="p">{</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">};</span>
         <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">Macros</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="n">Hidden</span><span class="p">;]</span> <span class="n">Debug</span> <span class="o">=</span> <span class="p">{</span> <span class="n">DEBUG</span><span class="p">,</span> <span class="mh">0x3</span> <span class="p">};</span>
        <span class="p">[</span><span class="n">Hidden</span><span class="p">;]</span> <span class="n">Lod</span> <span class="o">=</span> <span class="p">{</span> <span class="n">LOD</span><span class="p">,</span> <span class="mh">0x4</span> <span class="p">};</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>Public properties are exposed through groups. As we will see later, each group can be set independently to the RenderSystem. A group that can be shared between several shaders is marked with the keyword <strong>shared</strong>. The following properties are supported:</p>
<ul class="simple">
<li>bool</li>
<li>int</li>
<li>float</li>
<li>vector2</li>
<li>vector3</li>
<li>vector4</li>
<li>matrix3</li>
<li>matrix4</li>
<li>transform3</li>
<li>rgb</li>
<li>rgba</li>
<li>texture</li>
</ul>
<p>Array of properties and default values are supported with the trivial syntax shown in the example above.
Before the definition of a property a block of metadata can be specified. That metadata is freely interpreted by the the user of each shader.</p>
<div class="section" id="macros">
<h2>Macros</h2>
<p>Macros are similar to properties but they are normally translated to #define preprocessor instructions inside the shader implementation. For each macro there is an associated mask that determine the valid range of values. In the example above the following macros are found:</p>
<ul class="simple">
<li>Debug (mask = 0x011), 4 values: DEBUG = 0, DEBUG = 1, DEBUG = 2, DEBUG = 3</li>
<li>Lod   (mask=  0x100), 2 values: LOD = 0, LOD = 1</li>
</ul>
<p>Macros can be combined. For example, the instance 0x111 (we will see later how this is activated) will select the shader with (DEBUG=3 and LOD = 1)</p>
</div>
</div>
<div class="section" id="shader-implementations">
<h1>Shader Implementations</h1>
<div class="section" id="dx9">
<h2>DX9</h2>
<p>DX9 driver implements the shader using HLSL and a syntax very similar to Microsoft FX. Implementation is stored in .nfx files. For example,</p>
<div class="highlight"><pre><span></span><span class="cp">#ifdef VERTEX_SHADER</span>
    <span class="n">float3</span>   <span class="nl">camPos</span><span class="p">:</span> <span class="k">register</span><span class="p">(</span><span class="n">c18</span><span class="p">);</span>
    <span class="n">float4</span>   <span class="nl">time</span><span class="p">:</span> <span class="k">register</span><span class="p">(</span><span class="n">c19</span><span class="p">);</span>
    <span class="n">float4x4</span> <span class="nl">viewProj</span><span class="p">:</span> <span class="k">register</span><span class="p">(</span><span class="n">c20</span><span class="p">);</span>
<span class="cp">#endif</span>


<span class="n">float4x4</span> <span class="n">world</span><span class="p">;</span>
<span class="n">float4x4</span> <span class="n">worldViewProj</span><span class="p">;</span>

<span class="n">float3</span> <span class="n">color</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">VS_OUTPUT</span>
<span class="p">{</span>
    <span class="n">float4</span> <span class="nl">Position</span> <span class="p">:</span> <span class="n">POSITION</span><span class="p">;</span>
    <span class="n">float3</span> <span class="nl">Normal</span><span class="p">:</span> <span class="n">NORMAL0</span><span class="p">;</span>
    <span class="n">float2</span> <span class="nl">Coords</span> <span class="p">:</span> <span class="n">TEXCOORD0</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">VS_OUTPUT</span> <span class="nf">WireVS</span><span class="p">(</span><span class="n">in</span> <span class="n">float4</span> <span class="nl">vPosition</span> <span class="p">:</span> <span class="n">POSITION</span><span class="p">,</span> <span class="n">in</span> <span class="n">float3</span> <span class="nl">vNormal</span><span class="p">:</span> <span class="n">NORMAL0</span><span class="p">,</span>
    <span class="n">in</span> <span class="n">float2</span> <span class="nl">vCoords</span> <span class="p">:</span> <span class="n">TEXCOORD0</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">VS_OUTPUT</span> <span class="n">Output</span><span class="p">;</span>
    <span class="n">Output</span><span class="p">.</span><span class="n">Position</span> <span class="o">=</span> <span class="n">mul</span><span class="p">(</span> <span class="n">vPosition</span><span class="p">,</span> <span class="n">worldViewProj</span><span class="p">);</span>
    <span class="n">Output</span><span class="p">.</span><span class="n">Coords</span> <span class="o">=</span> <span class="n">vCoords</span><span class="p">;</span>
    <span class="n">Output</span><span class="p">.</span><span class="n">Normal</span> <span class="o">=</span> <span class="n">vNormal</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">Output</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">PS_OUTPUT</span>
<span class="p">{</span>
    <span class="n">float4</span> <span class="nl">RGBColor</span> <span class="p">:</span> <span class="n">COLOR0</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">PS_OUTPUT</span> <span class="nf">WirePS</span><span class="p">(</span> <span class="n">VS_OUTPUT</span> <span class="n">In</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">PS_OUTPUT</span> <span class="n">Output</span><span class="p">;</span>
    <span class="n">float3</span> <span class="n">light</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">float3</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">));</span>
    <span class="n">In</span><span class="p">.</span><span class="n">Normal</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">In</span><span class="p">.</span><span class="n">Normal</span><span class="p">);</span>
    <span class="kt">float</span> <span class="n">prod</span> <span class="o">=</span> <span class="n">clamp</span><span class="p">((</span><span class="n">dot</span><span class="p">(</span><span class="n">In</span><span class="p">.</span><span class="n">Normal</span><span class="p">,</span><span class="n">light</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">);</span>
    <span class="n">Output</span><span class="p">.</span><span class="n">RGBColor</span> <span class="o">=</span> <span class="n">float4</span><span class="p">(</span><span class="n">color</span> <span class="o">*</span> <span class="n">prod</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">Output</span><span class="p">;</span>
<span class="p">};</span>




<span class="c1">// -------------------------------------------------------------------------------</span>

<span class="n">technique</span> <span class="n">Render</span>
<span class="p">{</span>
    <span class="n">pass</span> <span class="n">p0</span>
    <span class="p">{</span>
        <span class="n">VertexShader</span> <span class="o">=</span> <span class="n">compile</span> <span class="n">vs_3_0</span> <span class="n">WireVS</span><span class="p">();</span>
        <span class="n">PixelShader</span> <span class="o">=</span> <span class="n">compile</span> <span class="n">ps_3_0</span> <span class="n">WirePS</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>Interface properties and shader implementation properties are matched by name. Properties of a shared group must be bound to hardware registers (:register(...)) in this implementation.</p>
<div class="section" id="defines">
<h3>Defines</h3>
<p>For this implementation the following defines can be used:</p>
<ul class="simple">
<li>D3D9</li>
<li>HLSL</li>
<li>VERTEX_SHADER (only for vertex shaders)</li>
<li>PIXEL_SHADER (only for pixel shaders)</li>
</ul>
</div>
<div class="section" id="renderstates">
<h3>RenderStates</h3>
<p>RenderStates are declated inside each pass. The following render states are implemented (default states indicated):</p>
<ul class="simple">
<li>ZEnable = <strong>true</strong> | false;</li>
<li>ZWriteEnable = <strong>true</strong> | false;</li>
<li>ZFunc = Never | LessEqual | <strong>Less</strong> | Equal | GreaterEqual | Greater | NotEqual | Always;</li>
<li>FillMode = <strong>Solid</strong> | Wireframe;</li>
<li>CullMode = <strong>None</strong> | Front | Back;</li>
<li>ScissorTestEnable = true | <strong>false</strong>;</li>
<li>PointSize = <strong>1.0</strong>;</li>
<li>PointSpriteEnable = true | <strong>false</strong>;</li>
<li>AlphaToCoverageEnable = true | <strong>false</strong>;</li>
<li>AlphaBlendEnable = true | <strong>false</strong>;</li>
<li>SrcBlend = Zero | <strong>One</strong> | SrcColor | InvSrcColor | SrcAlpha | InvSrcAlpha | DestColor | InvDestColor | DestAlpha | InvDestAlpha;</li>
<li>DestBlend = <strong>Zero</strong> | One | SrcColor | InvSrcColor | SrcAlpha | InvSrcAlpha | DestColor | InvDestColor | DestAlpha | InvDestAlpha;</li>
<li>ColorWriteEnable = <strong>0xf</strong>;</li>
<li>StencilEnable = true | <strong>false</strong>;</li>
<li>StencilFail = <strong>Keep</strong> | Zero | Replace | IncrSat | DecrSat | Invert | Incr | Decr;</li>
<li>StencilZFail = <strong>Keep</strong> | Zero | Replace | IncrSat | DecrSat | Invert | Incr | Decr;</li>
<li>StencilPass = <strong>Keep</strong> | Zero | Replace | IncrSat | DecrSat | Invert | Incr | Decr;</li>
<li>StencilFunc = Never | LessEqual | Less | Equal | GreaterEqual | Greater | NotEqual | <strong>Always</strong>;</li>
<li>StencilRef = <strong>0</strong> | &lt;<em>Constant</em>&gt;;</li>
<li>StencilMask = <strong>0xffffffff</strong>;</li>
<li>StencilWriteMask = <strong>0xffffffff</strong>;</li>
</ul>
<p>Some RenderStates can get its value from interface properties. An example for the <em>StencilRef</em> value:</p>
<div class="highlight"><pre><span></span><span class="n">Mask</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">stencilRef</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="n">technique</span> <span class="n">Render</span>
<span class="p">{</span>
    <span class="n">pass</span> <span class="n">p0</span>
    <span class="p">{</span>
        <span class="n">StencilRef</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">stencilRef</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="sampler-states">
<h3>Sampler states</h3>
<p>Sampler states are declared inside each sampler. The following sampler states are implemented:</p>
<ul class="simple">
<li>AddressU | AddressU  | AddressW = Wrap | Mirror | Clamp | Border | MirrorOnce;</li>
<li>MagFilter | MinFilter | MipFilter = None | Point | Linear | Anisotropic;</li>
<li>Texture = a texture property that must appear in the shader interface</li>
<li>MaxAnisotropy = 1;</li>
</ul>
</div>
</div>
</div>
<div class="section" id="using-shaders">
<h1>Using shaders</h1>
<p>Having a resource shader loaded the first step is instantiating each property group. The following code, create a constant buffer for the group <strong>Tweaks</strong>. When creating a constant buffer you must indicate if its content will change frequently or not. A dynamic constant buffer will copy its content to the command buffer when it is activated. A static constant buffer will only copy a reference to the data inside the command buffer. In this example the constant buffers is considered dynamic.</p>
<div class="highlight"><pre><span></span><span class="n">Ptr</span><span class="o">&lt;</span><span class="n">Render</span><span class="o">::</span><span class="n">IShader</span><span class="o">&gt;</span> <span class="n">shader</span> <span class="o">=</span> <span class="n">resourceSystem</span><span class="o">-&gt;</span><span class="n">Load</span><span class="p">(</span><span class="n">NSS</span><span class="p">(</span><span class="n">Shader</span><span class="p">),</span> <span class="n">NST</span><span class="p">(</span><span class="s">&quot;Solid.shader.nsd&quot;</span><span class="p">));</span>
<span class="n">Ptr</span><span class="o">&lt;</span><span class="n">Render</span><span class="o">::</span><span class="n">IConstantBuffer</span><span class="o">&gt;</span> <span class="n">cb</span> <span class="o">=</span>
    <span class="n">shader</span> <span class="o">-&gt;</span><span class="n">CreateConstantBuffer</span><span class="p">(</span><span class="n">NSS</span><span class="p">(</span><span class="n">Tweaks</span><span class="p">),</span> <span class="n">ConstantBufferUsage_Dynamic</span><span class="p">);</span>
</pre></div>
<p>To change properties values, the IConstantBuffer interface is used</p>
<div class="highlight"><pre><span></span><span class="n">cb</span><span class="o">-&gt;</span><span class="n">GetProperties</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Matrix4f</span><span class="o">&gt;</span><span class="p">(</span><span class="n">NSS</span><span class="p">(</span><span class="n">WorldViewProj</span><span class="p">),</span> <span class="n">Transpose</span><span class="p">(</span><span class="n">mView</span> <span class="o">*</span> <span class="n">mProj</span><span class="p">));</span>
</pre></div>
<p>Before rendering a primitive we need to bind the shader and its corresponding constant buffers. Before doing it, we need to define a context. The context indicates the instance (the combination of macros that are active), the technique and the pass. In this example, there is only one instance, one technique and one pass:</p>
<div class="highlight"><pre><span></span><span class="n">IShader</span><span class="o">::</span><span class="n">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="n">shader</span><span class="o">-&gt;</span><span class="n">GetContext</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">commands</span><span class="o">-&gt;</span><span class="n">SetShader</span><span class="p">(</span><span class="n">shader</span><span class="p">,</span> <span class="n">context</span><span class="p">);</span>
<span class="n">commands</span><span class="o">-&gt;</span><span class="n">SetConstantBuffer</span><span class="p">(</span><span class="n">cb</span><span class="p">,</span> <span class="n">context</span><span class="p">);</span>

<span class="n">commands</span><span class="o">-&gt;</span><span class="n">Draw</span><span class="p">(</span><span class="n">PrimitiveType_LineList</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">24</span><span class="p">);</span>
</pre></div>
</div>


        <!-- NOESIS WEB ------- BEGIN ------- -->

                            </div> <!-- eo noesis_doc_content -->
                        </div> <!-- eo doc_wrap -->
                    </div> <!-- eo noesis_web_contenidosMain -->

                </div> <!-- eo wrapper -->

            </div>  <!-- eo documentation-article -->

        </div> <!-- eo main-content -->

        <footer id="footer" class="SOZO-footer">
            <div class="wrapper">
                <ul class="footer social-icon-list">
                    <li>
                        <a href="https://twitter.com/noesisengine" title="Noesis Twitter" target="_blank">
                            <i class="svg-icon">
                                <svg class="icon-social-twitter">
                                    <use xlink:href="#svg-icon-social-twitter"></use>
                                </svg>
                            </i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.linkedin.com/company/noesis-technologies-sl" title="Noesis Linkedin" target="_blank">
                            <i class="svg-icon">
                                <svg class="icon-social-linkedin">
                                    <use xlink:href="#svg-icon-social-linkedin"></use>
                                </svg>
                            </i>
                        </a>
                    </li>
                    <li>
                        <a href="https://vimeo.com/noesisengine" title="Noesis Vimeo" target="_blank">
                            <i class="svg-icon">
                                <svg class="icon-social-vimeo">
                                    <use xlink:href="#svg-icon-social-vimeo"></use>
                                </svg>
                            </i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.youtube.com/user/NoesisTechnologies" title="Noesis Youtube" target="_blank">
                            <i class="svg-icon">
                                <svg class="icon-social-youtube">
                                    <use xlink:href="#svg-icon-social-youtube"></use>
                                </svg>
                            </i>
                        </a>
                    </li>
                </ul>

                <div class="footer-extended">

                    <div class="cols">

                        <nav class="unit">
                            <h3 class="title">home</h3>
                            <ul>
                                <li><a href="/#goto-home-main-features" class="goto" title="NoesisGUI Main Features">Features</a></li>
                                <li><a href="/#goto-home-apis" class="goto" title="NoesisGUI APIs and Integrations">Integrations</a></li>
                                <li><a href="/#goto-home-platforms" class="goto" title="NoesisGUI Supported Platforms">Platforms</a></li>
                                <li><a href="/#goto-home-clients" class="goto" title="NoesisGUI Happy Clients">Clients</a></li>
                            </ul>
                        </nav>

                        <nav class="unit">
                            <h3 class="title">Licensing</h3>
                            <ul>
                                <li><a href="/licensing.php#goto-licensing-prices" class="goto" title="NoesisGUI Prices">Prices</a></li>
                                <li><a href="/licensing.php#goto-licensing-faqs" class="goto" title="NoesisGUI Licensing FAqs">FAQs</a></li>
                            </ul>
                        </nav>

                        <nav class="unit">
                            <h3 class="title">Developers</h3>
                            <ul>
                                <li>
                                    <div style="display:block;padding: 0.4em 0;">
                                        <a href="/forums" class="goto" title="NoesisGUI Forums" style="display:inline;margin-right:1em;">Forums</a>
                                        <a href="https://bugs.noesisengine.com" class="goto" target="_blank" rel="nofollow" title="NoesisGUI Bug Tracker"style="display:inline;">Bugtracker</a>
                                    </div>
                                </li>
                                <li>
                                    <div style="display:block;padding: 0.4em 0;">
                                        <a href="/developers/samples.php" class="goto" title="NoesisGUI Samples and Tutorials"style="display:inline;margin-right:1em;">Samples</a>
                                        <a href="/developers/downloads.php" class="goto" title="NoesisGUI Downloads" style="display:inline;">Downloads</a>
                                    </div>
                                </li>
                                <li>
                                    <div style="display:block;padding: 0.4em 0;">
                                        <a href="https://trello.com/b/ktVkZaBG/noesisgui" class="goto" target="_blank" rel="nofollow" title="NoesisGUI Roadmap"style="display:inline;margin-right:1em;">Roadmap</a>
                                        <a href="/docs/Gui.Core.Changelog.html" class="goto" title="NoesisGUI Version Changelog"style="display:inline;">Changelog</a>
                                    </div>
                                </li>
                                <li>
                                    <a href="/docs/Gui.Core.Index.html" class="goto" title="NoesisGUI Documentation">Documentation</a>
                                </li>
                            </ul>
                        </nav>

                        <nav class="unit">
                            <h3 class="title">Contact</h3>
                            <ul>
                                <li><a href="/contact.php#goto-contact-about" class="goto" title="About Noesis">About</a></li>
                                <li><a href="/contact.php#goto-contact-details" class="goto" title="Contact Noesis">Contact details</a></li>
                            </ul>
                        </nav>

                    </div>

                    <nav class="legal">
                        <figure class="SOZO-media logo">
                            <img src="/images/logos/noesis-logo-stacked.png">
                        </figure>
                        <p>&copy; 2017 Noesis Technologies</p>
                        <a href="/legal/privacy.php" title="Privacy Policy" rel="nofollow">Privacy</a>
                        <a href="/legal/cookies.php" title="Cookie Policy" rel="nofollow">Cookies</a>
                        <a href="/legal/terms-of-use.php" title="Terms and Conditions" rel="nofollow">Terms &amp; Conditions</a>
                    </nav>

                </div>

                <div class="footer-reduced">
                    <ul>
                        <li><a href="/" class="goto" title="NoesisGUI Main Features">Features</a></li>
                        <li><a href="/licensing.php" class="goto" title="NoesisGUI Prices">Licensing</a></li>
                        <li><a href="/forums" class="goto" title="NoesisGUI Forums">Developer</a></li>
                        <li><a href="/contact.php" class="goto" title="NoesisGUI Prices">Contact</a></li>
                    </ul>
                    <ul class="copyright-legal">
                        <li>&copy; 2017 Noesis Technologies</li>
                        <li><a href="/legal/privacy.php" title="Privacy Policy" rel="nofollow">Privacy</a></li>
                        <li><a href="/legal/terms-of-use.php" title="Terms and Conditions" rel="nofollow">Terms &amp; Conditions</a></li>
                    </ul>
                </div>
            </div>
        </footer>

        <footer id="doc-footer">
            <span>&copy; 2017 Noesis Technologies</span>
        </footer>

    </div> <!-- eo developers documentation -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!-- Use if you want latest version of 1x -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> -->

    <!-- If using 1.11.3 make sure you update the fallback file below to 1.11.3 -->
    <script>window.jQuery || document.write('<script src="/js/vendor/jquery.js"><\/script>')</script>

    <script src="/js/plugins.1481882071.js"></script><script src="/js/main.1485346364.js"></script>

    <!-- NOESIS WEB ------- END ------- -->


</div>
</body>
</html>
