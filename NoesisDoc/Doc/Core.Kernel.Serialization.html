<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.13.1: http://docutils.sourceforge.net/" />
<title>noesisGUI Documentation: Serialization</title>


    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="description" content="NoesisGUI Documentation"/>
    
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
    <link rel="shortcut icon" href="/favicon.ico">

    <!--script src="https://use.typekit.net/taq4txx.js"></script-->
    <!--script>try{Typekit.load({ async: true });}catch(e){}</script-->

    <link rel="stylesheet" href="style/noesis.css" type="text/css" media="all"/>

    <script type="text/javascript" src="/js/googleAnalytics.js?version=1.0"></script>
    <!--[if lt IE 7]><script src="http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js" type="text/javascript"></script><![endif]-->

    <script src="/js/vendor/modernizr.js"></script>


</head>
<body>
<div class="document" id="serialization">


    <!-- NOESIS WEB ------- BEGIN ------- -->

    <div class="developers documentation">

        <!--[if lt IE 9]>
        <script type="text/javascript" src="/js/vendor/selectivizr.js"></script>
        <script type="text/javascript" src="/js/vendor/respond.js"></script>
        <div class="old-browser-warning">
            You are using a very old browser.<br>
            To get the best possible experience using our website we recommend that you upgrade to a newer version or other web browser. <br>
            A list of the most popular web browsers <a href="http://browsehappy.com/">can be found here</a>
        </div>
        <![endif]-->

        <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
            <symbol id="svg-icon-social-vimeo" width="30" height="30" viewBox="-26 20 30 30">
                <path d="M-23,30.2c2.1-1.7,5.1-4.8,7.5-4.8c2.3,0,2.9,2.2,3.2,4.7c0.3,2.5,1.2,7.8,2.5,7.8 c1.2,0,4.1-4.7,3.9-6.6c-0.2-1.8-2.2-1.6-3.3-1c1-3.7,3.4-5.8,6.5-5.8c3.1,0,3.8,2.3,3.8,4.9c0,3.9-8.2,16-13.1,16 c-3.1,0-3.8-4.4-4.4-6.6c-0.6-2.2-1.8-7.9-3.3-8.3c-0.6-0.1-2.1,1.1-2.1,1.1L-23,30.2z"/>
            </symbol>
            <symbol id="svg-icon-social-google" width="30" height="30" viewBox="-25 24 30 30">
                <path d="M-6.3 45.9c0 1-.3 2-.8 2.8-1.7 2.9-5.2 3.9-8.3 3.9-2.5 0-5.5-.6-6.9-2.9-.4-.6-.6-1.4-.6-2.1 0-1.9 1.1-3.4 2.7-4.3 1.9-1.2 4.4-1.5 6.6-1.6-.6-.8-1-1.4-1-2.4 0-.5.1-.9.3-1.4-.4 0-.7.1-1.1.1-3.2 0-5.8-2.3-5.8-5.6 0-1.8.9-3.6 2.2-4.8 1.8-1.5 4.3-2.1 6.6-2.1h6.9l-2.3 1.4H-10c1.5 1.3 2.5 2.7 2.5 4.8 0 4.2-3.9 4.7-3.9 6.8 0 2 5.1 2.7 5.1 7.4zm-2.3 1.4c0-2.2-2.2-3.6-3.8-4.7h-.8c-2.7 0-6.6.9-6.6 4.2 0 3.2 3.5 4.3 6.1 4.3 2.4 0 5.1-1 5.1-3.8zm-2.8-11.5c.7-.7.9-1.6.9-2.6 0-2.4-1.4-6.5-4.4-6.5-.9 0-1.9.5-2.4 1.2-.6.7-.8 1.7-.8 2.6 0 2.5 1.4 6.3 4.3 6.3.8 0 1.8-.4 2.4-1zm14.4.9v1.8H-.5v3.6h-1.7v-3.6h-3.5v-1.8h3.5v-3.6h1.7v3.6H3z">
            </symbol>
            <symbol id="svg-icon-social-twitter" width="30" height="30" viewBox="-25 20 30 30">
                <path d="M.4 29.7v.7c0 7-5.3 15.1-15.1 15.1-3 0-5.8-.9-8.1-2.4.4 0 .8.1 1.3.1 2.5 0 4.8-.8 6.6-2.3-2.3 0-4.3-1.6-5-3.7.3 0 .7.1 1 .1.5 0 1-.1 1.4-.2-2.4-.5-4.2-2.6-4.2-5.2v-.1c.7.4 1.5.6 2.4.7-1.4-1-2.4-2.6-2.4-4.4 0-1 .3-1.9.7-2.7 2.6 3.2 6.5 5.3 10.9 5.5-.1-.4-.1-.8-.1-1.2 0-2.9 2.4-5.3 5.3-5.3 1.5 0 2.9.6 3.9 1.7 1.2-.2 2.3-.7 3.4-1.3C2 26 1.2 27.1.1 27.7c1.1-.1 2.1-.4 3.1-.8C2.4 28 1.4 29 .4 29.7z">
            </symbol>
            <symbol id="svg-icon-social-facebook" width="30" height="30" viewBox="-31 24 30 30">
                <path d="M-8.7 29.8h-2.6c-2 0-2.4 1-2.4 2.4v3.1h4.8l-.6 4.9h-4.2v12.5h-5V40.1h-4.2v-4.9h4.2v-3.6c0-4.2 2.5-6.4 6.2-6.4 1.8 0 3.3.1 3.7.2v4.4z">
            </symbol>
            <symbol id="svg-icon-social-youtube" width="30" height="30" viewBox="-26 25 30 30">
                <path d="M.9 52c-.3 1.3-1.4 2.2-2.6 2.4-3 .3-6.1.3-9.1.3s-6.1 0-9.1-.3c-1.3-.1-2.3-1.1-2.6-2.4-.5-1.9-.5-3.9-.5-5.8s0-3.9.4-5.7c.3-1.3 1.4-2.2 2.6-2.4 3-.3 6.1-.3 9.1-.3s6.1 0 9.1.3c1.3.1 2.3 1.1 2.6 2.4.4 1.8.4 3.8.4 5.7.1 1.9.1 3.9-.3 5.8zm-17-9.8v-1.5h-5.1v1.5h1.7v9.3h1.6v-9.3h1.8zm2.7-16.9l-2 6.5v4.4H-17v-4.4c-.1-.8-.5-2-1-3.5-.4-1-.7-2.1-1.1-3.1h1.7l1.2 4.3 1.1-4.3h1.7zm1.8 26.2v-8.1h-1.5v6.2c-.3.5-.6.7-.9.7-.2 0-.3-.1-.3-.3v-6.6h-1.5v6.4c0 .6 0 1 .1 1.2.1.4.5.6 1 .6s1.1-.3 1.7-1v.9h1.4zM-9 33.6c0 .9-.1 1.5-.5 1.9-.4.6-1 .8-1.7.8s-1.3-.3-1.7-.8c-.3-.4-.5-1.1-.5-1.9v-2.9c0-.9.1-1.5.5-1.9.4-.6 1-.8 1.7-.8.8 0 1.3.3 1.7.8.3.4.5 1 .5 1.9v2.9zm-1.5-3.1c0-.8-.2-1.1-.7-1.1-.5 0-.7.4-.7 1.1v3.4c0 .8.2 1.1.7 1.1.5 0 .7-.4.7-1.1v-3.4zM-6 45.8c0-.8 0-1.3-.1-1.6-.2-.6-.6-.9-1.2-.9-.5 0-1 .3-1.5.9v-3.6h-1.5v10.9h1.5v-.8c.5.6 1 .9 1.5.9.6 0 1-.3 1.2-.9.1-.3.1-.9.1-1.6v-3.3zm-1.5 3.4c0 .7-.2 1.1-.6 1.1-.2 0-.5-.1-.7-.4V45c.2-.2.5-.4.7-.4.4 0 .6.4.6 1.1v3.5zm4-12.9H-5v-.9c-.6.7-1.1 1-1.7 1-.5 0-.8-.2-1-.6-.1-.2-.1-.6-.1-1.2v-6.5h1.5v6.6c0 .2.1.4.3.4.3 0 .6-.2.9-.7v-6.2h1.5v8.1zm3 12.4H-2v1c-.1.4-.3.6-.7.6-.5 0-.8-.4-.8-1.1v-1.4h2.9V46c0-.9-.1-1.5-.4-1.9-.4-.6-1-.8-1.7-.8-.8 0-1.3.3-1.8.8-.3.4-.5 1-.5 1.9v2.8c0 .9.2 1.5.5 1.9.4.6 1 .8 1.8.8s1.4-.3 1.8-.9c.2-.3.3-.6.3-.9v-1zM-2 46.5h-1.5v-.8c0-.7.2-1.1.7-1.1s.8.4.8 1.1v.8z">
            </symbol>
            <symbol id="svg-icon-social-linkedin" width="30" height="30" viewBox="-26 25 30 30">
                <path d="M-22.6 51.3h5v-15h-5v15zm17.8-15.5c-2.2 0-3.5.8-4.8 2.6v-2.1h-5v15h5v-8.1c0-1.7.9-3.4 2.8-3.4 2 0 3.2 1.7 3.2 3.4v8.2h5v-8.5c0-6-4-7.1-6.2-7.1zM-20.1 29c-1.6 0-2.9 1.2-2.9 2.6 0 1.5 1.3 2.6 2.9 2.6 1.6 0 2.9-1.2 2.9-2.6.1-1.4-1.2-2.6-2.9-2.6z">
            </symbol>
            <symbol id="svg-scroll-down" width="48" height="48" viewBox="0 0 48 48">
                <path d="M24 1C11.3 1 1 11.3 1 24s10.3 23 23 23 23-10.3 23-23S36.7 1 24 1zm0 31.5L11.9 21.6l1.3-1.5L24 29.8l10.7-9.7 1.3 1.5-12 10.9z">
            </symbol>
        </svg>

        <header id="header" class="SOZO-header js-hide-nav">

            <div class="wrapper">

                <a href="/" class="logo animate-me" title="Noesis">
                    <img src="/images/logos/noesis-gui-logo.svg" alt="NoesisGUI">
                </a>

                <div class="user-management">
                    <iframe src="/includes/user.php" scrolling="no"></iframe>
                </div>

                <a title="Menu" href="/" class="mobile-menu" rel="nofollow">
                    <i class="burger-icon"></i>
                </a>

                <nav class="primary-nav site-nav" role="navigation">
                    <ul>
                        <li><a href="/" title="NoesisGUI Main Features"><span>features</span></a></li>
                        <li><a href="/licensing.php" title="NoesisGUI Licensing"><span>licensing</span></a></li>
                        <li class="has-children"><a data-id="child-nav" href="/forums" title="NoesisGUI Developer Resources" class="js-mobile-2nd-nav active"><span>developer</span></a>
                            <nav class="child-nav" id="child-nav">
                                <ul>
                                    <li><a href="/forums" title="NoesisGUI Forums">forums</a></li>
                                    <li><a href="/developers/samples.php" title="NoesisGUI Samples">samples</a></li>
                                    <li><a href="/developers/downloads.php" title="NoesisGUI Downloads">downloads</a></li>
                                    <li><a href="/docs/Gui.Core.Index.html" title="NoesisGUI Documentation" class="active">documentation</a></li>
                                    <li><a href="/docs/Gui.Core.Changelog.html" title="NoesisGUI Version Changelog">changelog</a></li>
                                    <li><a href="https://bugs.noesisengine.com" target="_blank" rel="nofollow" title="NoesisGUI Bug Tracker">bugtracker</a></li>
                                    <li><a href="https://trello.com/b/ktVkZaBG/noesisgui" target="_blank" rel="nofollow" title="NoesisGUI Roadmap">roadmap</a></li>
                                </ul>
                            </nav>
                        </li>
                        <li><a href="/contact.php" title="Contact Information"><span>Contact</span></a></li>
                    </ul>
                </nav>

            </div>

        </header>

        <header id="doc-header">
            <img src="noesis-gui-logo.svg" alt="NoesisGUI">
        </header>

        <div class="main-content" role="main">

            <nav id="noesis-secondary-nav" class="secondary-nav site-nav js-hide-nav">
                <div class="wrapper">
                    <ul>
                        <li><a href="/forums" title="NoesisGUI Forums">forums</a></li>
                        <li><a href="/developers/samples.php" title="NoesisGUI Samples">samples</a></li>
                        <li><a href="/developers/downloads.php" title="NoesisGUI Downloads">downloads</a></li>
                        <li><a href="/docs/Gui.Core.Index.html" title="NoesisGUI Documentation" class="active">documentation</a></li>
                        <li><a href="/docs/Gui.Core.Changelog.html" title="NoesisGUI Version Changelog">changelog</a></li>
                        <li><a href="https://bugs.noesisengine.com" target="_blank" rel="nofollow" title="NoesisGUI Bug Tracker">bugtracker</a></li>
                        <li><a href="https://trello.com/b/ktVkZaBG/noesisgui" target="_blank" rel="nofollow" title="roadmap">roadmap</a></li>
                    </ul>
                </div>
            </nav>


            <div class="documentation-article">

                <div class="wrapper">

                    <div id="noesis_web_contenidosMain" class="noesis_web_contenidosMain sozo-content">
                        <div id="noesis_doc_wrap">

                            <div class="noesis_doc_header_menu">
                                <a href="Gui.Core.Index.html" class="noesis_doc_header_link">Documentation Index</a>
                            </div>

                            <div class="noesis_doc_content">

        <!-- NOESIS WEB ------- END ------- -->


<h1 class="title">Serialization</h1>

<div class="section" id="implementing-serializable-components">
<h1>Implementing serializable components</h1>
<p>Serialization is the process by which components can be saved or loaded from a stream. All kind of streams are supported. That way, serialization can be used to save objects to disk or to a memory buffer.</p>
<p>To make a serializable component, it must implement the ISerializable interface.</p>
<div class="highlight"><pre><span></span><span class="n">NS_INTERFACE</span> <span class="nl">ISerializable</span><span class="p">:</span> <span class="k">public</span> <span class="n">ICommon</span>
<span class="p">{</span>
    <span class="k">virtual</span> <span class="n">NsUInt32</span> <span class="n">GetVersion</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">Serialize</span><span class="p">(</span><span class="n">SerializationData</span><span class="o">*</span> <span class="n">data</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">Unserialize</span><span class="p">(</span><span class="n">UnserializationData</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="n">NsUInt32</span> <span class="n">version</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">PostUnserialize</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
<p>The Serialize() method receives a SerializationData instance with overloaded Serialize methods to serialize all kind of data: simple data, strings, stl data, structs and other serializable components. The same for the Unserialize() method but receiving a UnserializationData instance. Both implementations, Serialize and Unserialize, must remain symmetric, loading the same data that was saved and in the same order.</p>
<p>The following example implements a serializable component</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TestComponent</span><span class="o">:</span> <span class="k">public</span> <span class="n">BaseComponent</span><span class="p">,</span> <span class="k">public</span> <span class="n">ISerializable</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="c1">/// Constructor</span>
    <span class="n">TestComponent</span><span class="p">()</span><span class="o">:</span>
        <span class="n">i8</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">i16</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="n">i32</span><span class="p">(</span><span class="mi">150</span><span class="p">),</span> <span class="n">i64</span><span class="p">(</span><span class="mi">250</span><span class="p">),</span>
        <span class="n">ui8</span><span class="p">(</span><span class="mi">251</span><span class="p">),</span> <span class="n">ui16</span><span class="p">(</span><span class="mi">450</span><span class="p">),</span> <span class="n">ui32</span><span class="p">(</span><span class="mi">550</span><span class="p">),</span> <span class="n">ui64</span><span class="p">(</span><span class="mi">600</span><span class="p">),</span> <span class="n">i</span><span class="p">(</span><span class="mi">45</span><span class="p">),</span> <span class="n">ui</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span> <span class="n">size</span><span class="p">(</span><span class="mi">333</span><span class="p">),</span>
        <span class="n">b</span><span class="p">(</span><span class="nb">true</span><span class="p">),</span>
        <span class="n">f32</span><span class="p">(</span><span class="mf">20.0f</span><span class="p">),</span> <span class="n">f64</span><span class="p">(</span><span class="mf">5000.0</span><span class="p">),</span>
        <span class="n">c8</span><span class="p">(</span><span class="sc">&#39;a&#39;</span><span class="p">),</span> <span class="n">c16</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="sc">&#39;q&#39;</span><span class="p">)),</span> <span class="n">s8</span><span class="p">(</span><span class="s">&quot;ansi string&quot;</span><span class="p">),</span> <span class="n">s16</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;unicode string&quot;</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">bytes</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">33</span><span class="p">);</span>
        <span class="n">bytes</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">31</span><span class="p">);</span>
        <span class="n">bytes</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">13</span><span class="p">);</span>
        <span class="n">bytes</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">44</span><span class="p">);</span>
        <span class="n">bytes</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">41</span><span class="p">);</span>
        <span class="n">bytes</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">14</span><span class="p">);</span>

        <span class="n">heights</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">10.0f</span><span class="p">;</span>
        <span class="n">heights</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">20.0f</span><span class="p">;</span>
        <span class="n">heights</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mf">30.0f</span><span class="p">;</span>
        <span class="n">heights</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">40.0f</span><span class="p">;</span>
        <span class="n">heights</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mf">50.0f</span><span class="p">;</span>

        <span class="n">color</span> <span class="o">=</span> <span class="n">Blue</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">/// From ISerializable</span>
    <span class="c1">//@{</span>
    <span class="n">NsUInt32</span> <span class="n">GetVersion</span><span class="p">()</span> <span class="k">const</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="mi">123</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">Serialize</span><span class="p">(</span><span class="n">SerializationData</span><span class="o">*</span> <span class="n">data</span><span class="p">)</span> <span class="k">const</span>
    <span class="p">{</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;i8&quot;</span><span class="p">),</span> <span class="n">i8</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;i16&quot;</span><span class="p">),</span> <span class="n">i16</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;i32&quot;</span><span class="p">),</span> <span class="n">i32</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;i64&quot;</span><span class="p">),</span> <span class="n">i64</span><span class="p">);</span>

        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;ui8&quot;</span><span class="p">),</span> <span class="n">ui8</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;ui16&quot;</span><span class="p">),</span> <span class="n">ui16</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;ui32&quot;</span><span class="p">),</span> <span class="n">ui32</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;ui64&quot;</span><span class="p">),</span> <span class="n">ui64</span><span class="p">);</span>

        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;i&quot;</span><span class="p">),</span> <span class="n">i</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;ui&quot;</span><span class="p">),</span> <span class="n">ui</span><span class="p">);</span>

        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;size&quot;</span><span class="p">),</span> <span class="n">size</span><span class="p">);</span>

        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;bool&quot;</span><span class="p">),</span> <span class="n">b</span><span class="p">);</span>

        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;f32&quot;</span><span class="p">),</span> <span class="n">f32</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;f64&quot;</span><span class="p">),</span> <span class="n">f64</span><span class="p">);</span>

        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;c8&quot;</span><span class="p">),</span> <span class="n">c8</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;c16&quot;</span><span class="p">),</span> <span class="n">c16</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;s8&quot;</span><span class="p">),</span> <span class="n">s8</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;s16&quot;</span><span class="p">),</span> <span class="n">s16</span><span class="p">);</span>

        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;bytes&quot;</span><span class="p">),</span> <span class="n">bytes</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;heights&quot;</span><span class="p">),</span> <span class="n">heights</span><span class="p">);</span>

        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;color&quot;</span><span class="p">),</span> <span class="n">color</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">Unserialize</span><span class="p">(</span><span class="n">UnserializationData</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="n">NsUInt32</span> <span class="n">version</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">NS_ASSERT</span><span class="p">(</span><span class="n">version</span> <span class="o">==</span> <span class="n">GetVersion</span><span class="p">());</span>

        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;i8&quot;</span><span class="p">),</span> <span class="n">i8</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;i16&quot;</span><span class="p">),</span> <span class="n">i16</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;i32&quot;</span><span class="p">),</span> <span class="n">i32</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;i64&quot;</span><span class="p">),</span> <span class="n">i64</span><span class="p">);</span>

        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;ui8&quot;</span><span class="p">),</span> <span class="n">ui8</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;ui16&quot;</span><span class="p">),</span> <span class="n">ui16</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;ui32&quot;</span><span class="p">),</span> <span class="n">ui32</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;ui64&quot;</span><span class="p">),</span> <span class="n">ui64</span><span class="p">);</span>

        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;i&quot;</span><span class="p">),</span> <span class="n">i</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;ui&quot;</span><span class="p">),</span> <span class="n">ui</span><span class="p">);</span>

        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;size&quot;</span><span class="p">),</span> <span class="n">size</span><span class="p">);</span>

        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;bool&quot;</span><span class="p">),</span> <span class="n">b</span><span class="p">);</span>

        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;f32&quot;</span><span class="p">),</span> <span class="n">f32</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;f64&quot;</span><span class="p">),</span> <span class="n">f64</span><span class="p">);</span>

        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;c8&quot;</span><span class="p">),</span> <span class="n">c8</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;c16&quot;</span><span class="p">),</span> <span class="n">c16</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;s8&quot;</span><span class="p">),</span> <span class="n">s8</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;s16&quot;</span><span class="p">),</span> <span class="n">s16</span><span class="p">);</span>

        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;bytes&quot;</span><span class="p">),</span> <span class="n">bytes</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;heights&quot;</span><span class="p">),</span> <span class="n">heights</span><span class="p">);</span>

        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;color&quot;</span><span class="p">),</span> <span class="n">color</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">PostUnserialize</span><span class="p">()</span> <span class="p">{}</span>
    <span class="c1">//@}</span>

    <span class="n">NsInt8</span> <span class="n">i8</span><span class="p">;</span>
    <span class="n">NsInt16</span> <span class="n">i16</span><span class="p">;</span>
    <span class="n">NsInt32</span> <span class="n">i32</span><span class="p">;</span>
    <span class="n">NsInt64</span> <span class="n">i64</span><span class="p">;</span>
    <span class="n">NsUInt8</span> <span class="n">ui8</span><span class="p">;</span>
    <span class="n">NsUInt16</span> <span class="n">ui16</span><span class="p">;</span>
    <span class="n">NsUInt32</span> <span class="n">ui32</span><span class="p">;</span>
    <span class="n">NsUInt64</span> <span class="n">ui64</span><span class="p">;</span>

    <span class="n">NsInt</span> <span class="n">i</span><span class="p">;</span>
    <span class="n">NsUInt</span> <span class="n">ui</span><span class="p">;</span>

    <span class="n">NsSize</span> <span class="n">size</span><span class="p">;</span>

    <span class="n">NsBool</span> <span class="n">b</span><span class="p">;</span>

    <span class="n">NsFloat32</span> <span class="n">f32</span><span class="p">;</span>
    <span class="n">NsFloat32</span> <span class="n">f64</span><span class="p">;</span>

    <span class="n">NsChar8</span> <span class="n">c8</span><span class="p">;</span>
    <span class="n">NsChar8</span> <span class="n">c16</span><span class="p">;</span>
    <span class="n">NsString8</span> <span class="n">s8</span><span class="p">;</span>
    <span class="n">NsString16</span> <span class="n">s16</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">NsByte</span><span class="o">&gt;</span> <span class="n">bytes</span><span class="p">;</span>
    <span class="n">NsFloat32</span> <span class="n">heights</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>

    <span class="k">enum</span> <span class="n">Color</span>
    <span class="p">{</span>
        <span class="n">Red</span><span class="p">,</span>
        <span class="n">Green</span><span class="p">,</span>
        <span class="n">Blue</span>
    <span class="p">};</span>

    <span class="n">Color</span> <span class="n">color</span><span class="p">;</span>

    <span class="c1">/// Reflection</span>
    <span class="c1">//@{</span>
    <span class="n">NS_BEGIN_REFLECTION</span><span class="p">(</span><span class="n">NSS</span><span class="p">(</span><span class="s">&quot;TestComponent&quot;</span><span class="p">),</span> <span class="n">TestComponent</span><span class="p">,</span> <span class="n">BaseComponent</span><span class="p">)</span>
        <span class="n">NS_IMPL</span><span class="p">(</span><span class="n">ISerializable</span><span class="p">)</span>
    <span class="n">NS_END_REFLECTION</span>

    <span class="n">NS_IMPLEMENT_INLINE_COMPONENT_REFLECTION</span>
    <span class="c1">//@}</span>
<span class="p">};</span>
</pre></div>
<p>To serialize a component, it must implement the ISerializable interface and must be registered in the kernel component factory.</p>
<p>To serialize a struct, it must implement the Serialize and Unserialize methods. For example:</p>
<div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">Target</span>
<span class="p">{</span>
    <span class="n">NsFloat32</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">;</span>
    <span class="n">Ptr</span><span class="o">&lt;</span><span class="n">BaseComponent</span><span class="o">&gt;</span> <span class="n">target</span><span class="p">;</span>

    <span class="kt">void</span> <span class="nf">Serialize</span><span class="p">(</span><span class="n">SerializationData</span><span class="o">*</span> <span class="n">data</span><span class="p">)</span> <span class="k">const</span>
    <span class="p">{</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">),</span> <span class="n">x</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">),</span> <span class="n">y</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;z&quot;</span><span class="p">),</span> <span class="n">z</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;target&quot;</span><span class="p">),</span> <span class="n">target</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">Unserialize</span><span class="p">(</span><span class="n">UnserializationData</span><span class="o">*</span> <span class="n">data</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">),</span> <span class="n">x</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">),</span> <span class="n">y</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;z&quot;</span><span class="p">),</span> <span class="n">z</span><span class="p">);</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;target&quot;</span><span class="p">),</span> <span class="n">target</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">/// Reflection</span>
    <span class="c1">//@{</span>
    <span class="n">NS_BEGIN_REFLECTION</span><span class="p">(</span><span class="n">NSS</span><span class="p">(</span><span class="s">&quot;Target&quot;</span><span class="p">),</span> <span class="n">Target</span><span class="p">,</span> <span class="n">NoParent</span><span class="p">)</span>
    <span class="n">NS_END_REFLECTION</span>

    <span class="n">NS_IMPLEMENT_INLINE_CLASS_REFLECTION</span>
    <span class="c1">//@}</span>
<span class="p">};</span>
</pre></div>
<div class="section" id="enum-serialization">
<h2>Enum serialization</h2>
<p>Enumeration are serialized by default as its native size (int32)</p>
<div class="highlight"><pre><span></span><span class="k">enum</span> <span class="n">Color</span>
<span class="p">{</span>
   <span class="n">Red</span><span class="p">,</span>
   <span class="n">Green</span><span class="p">,</span>
   <span class="n">Blue</span>
<span class="p">};</span>

<span class="n">Color</span> <span class="n">color</span><span class="p">;</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;color&quot;</span><span class="p">),</span> <span class="n">color</span><span class="p">);</span>
</pre></div>
<p>If you want to optimize for size, enums can be serialized with the SerializeEnum function. To that function you must pass the size the enum will be converted to:</p>
<div class="highlight"><pre><span></span><span class="k">enum</span> <span class="n">Color</span>
<span class="p">{</span>
   <span class="n">Red</span><span class="p">,</span>
   <span class="n">Green</span><span class="p">,</span>
   <span class="n">Blue</span>
<span class="p">};</span>

<span class="n">Color</span> <span class="n">color</span><span class="p">;</span>
<span class="n">data</span><span class="o">-&gt;</span><span class="n">SerializeEnum</span><span class="o">&lt;</span><span class="n">NsUInt8</span><span class="o">&gt;</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;color&quot;</span><span class="p">),</span> <span class="n">color</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="saving-to-stream">
<h1>Saving to Stream</h1>
<p>To save a component to a stream, a SerializationManager is needed. You start the serialization process with the SerializeBegin() method passing the stream and the serialization options.</p>
<div class="highlight"><pre><span></span><span class="n">Ptr</span><span class="o">&lt;</span><span class="n">ISerializationManager</span><span class="o">&gt;</span> <span class="n">sm</span> <span class="o">=</span> <span class="n">factory</span><span class="o">-&gt;</span><span class="n">CreateComponent</span><span class="p">(</span><span class="n">NSS</span><span class="p">(</span><span class="s">&quot;SerializationManager&quot;</span><span class="p">));</span>

<span class="n">sm</span><span class="o">-&gt;</span><span class="n">SerializeBegin</span><span class="p">(</span><span class="n">stream</span><span class="p">);</span>
<span class="n">sm</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">component0</span><span class="p">);</span>
<span class="n">sm</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">component1</span><span class="p">);</span>
<span class="n">sm</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">component2</span><span class="p">);</span>
<span class="n">sm</span><span class="o">-&gt;</span><span class="n">SerializeEnd</span><span class="p">();</span>
</pre></div>
<p>Although both components and structs can be serialized, root objects (those passed to the SerializationManager::Serialize()) can only be components.</p>
</div>
<div class="section" id="loading-from-a-stream">
<h1>Loading from a Stream</h1>
<p>To load a component from a stream, a SerializationManager is needed. The first thing to do is invoking UnseralizeBegin(). This method will return the number of objects inside the stream.</p>
<div class="highlight"><pre><span></span><span class="n">Ptr</span><span class="o">&lt;</span><span class="n">ISerializationManager</span><span class="o">&gt;</span> <span class="n">sm</span> <span class="o">=</span> <span class="n">factory</span><span class="o">-&gt;</span><span class="n">CreateComponent</span><span class="p">(</span><span class="n">NSS</span><span class="p">(</span><span class="s">&quot;SerializationManager&quot;</span><span class="p">));</span>

<span class="n">NsSize</span> <span class="n">numComponents</span> <span class="o">=</span> <span class="n">sm</span><span class="o">-&gt;</span><span class="n">UnserializeBegin</span><span class="p">(</span><span class="n">stream</span><span class="p">);</span>
<span class="k">for</span> <span class="p">(</span><span class="n">NsSize</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">numComponents</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Ptr</span><span class="o">&lt;</span><span class="n">TestComponent</span><span class="o">&gt;</span> <span class="n">component</span> <span class="o">=</span> <span class="n">sm</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">();</span>
<span class="p">}</span>
<span class="n">sm</span><span class="o">-&gt;</span><span class="n">UnserializeEnd</span><span class="p">();</span>
</pre></div>
</div>
<div class="section" id="versioning">
<h1>Versioning</h1>
<p>Versioning is the mechanism supported by the Serialization to allow loading and saving components in a backward compatible way. This means that you can load old version of a component.</p>
<p>The current version of a component is returned in the ISerializable::GetVersion() method. When that component is unserialized, in the method Unserialize() you receive the current version fo the component stored in the stream. This allow for code like this:</p>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">Unserialize</span><span class="p">(</span><span class="n">UnserializationData</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="n">NsUInt32</span> <span class="n">version</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">),</span> <span class="n">mName</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">version</span> <span class="o">&gt;</span> <span class="mh">0x100</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">),</span> <span class="n">mName2</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">version</span> <span class="o">&gt;</span> <span class="mh">0x150</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;index&quot;</span><span class="p">),</span> <span class="n">mIndex</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>With this code, you are allowed to unserialize object from version 0x000, 0x100 and 0x150.</p>
<p>The versioning process allows for changing how components are serialized while maintaining compatibility with old formats.</p>
<div class="section" id="parent-serialization">
<h2>Parent serialization</h2>
<p>When mixing component in a hierarchy, care must be taken when serializing. Each component will have its own version that must be respected. The macros NS_SERIALIZE_PARENT, NS_UNSERIALIZE_PARENT and NS_POSTUNSERIALIZE_PARENT must be used for that purpose.</p>
<div class="highlight"><pre><span></span><span class="c1">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<span class="kt">void</span> <span class="n">DX9FileTexture2D</span><span class="o">::</span><span class="n">Serialize</span><span class="p">(</span><span class="n">Core</span><span class="o">::</span><span class="n">SerializationData</span><span class="o">*</span> <span class="n">data</span><span class="p">)</span> <span class="k">const</span>
<span class="p">{</span>
    <span class="n">NS_SERIALIZE_PARENT</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>

    <span class="n">NS_ASSERT</span><span class="p">(</span><span class="n">mFileTextureData</span><span class="p">);</span>
    <span class="n">NS_ASSERT</span><span class="p">(</span><span class="n">mFileTextureData</span><span class="o">-&gt;</span><span class="n">mFaces</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">const</span> <span class="n">Ptr</span><span class="o">&lt;</span><span class="n">DX9TextureFace</span><span class="o">&gt;&amp;</span> <span class="n">face</span> <span class="o">=</span> <span class="n">mFileTextureData</span><span class="o">-&gt;</span><span class="n">mFaces</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="n">data</span><span class="o">-&gt;</span><span class="n">Serialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;Levels&quot;</span><span class="p">),</span> <span class="n">face</span><span class="o">-&gt;</span><span class="n">mLevels</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<span class="kt">void</span> <span class="n">DX9FileTexture2D</span><span class="o">::</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">Core</span><span class="o">::</span><span class="n">UnserializationData</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="n">NsUInt32</span> <span class="n">version</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">NS_UNUSED</span><span class="p">(</span><span class="n">version</span><span class="p">);</span>
    <span class="n">NS_UNSERIALIZE_PARENT</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>

    <span class="n">NS_ASSERT</span><span class="p">(</span><span class="o">!</span><span class="n">mFileTextureData</span><span class="p">);</span>
    <span class="n">mFileTextureData</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DX9FileTextureData</span><span class="p">();</span>
    <span class="n">mFileTextureData</span><span class="o">-&gt;</span><span class="n">mFaces</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="k">new</span> <span class="n">DX9TextureFace</span><span class="p">());</span>
    <span class="k">const</span> <span class="n">Ptr</span><span class="o">&lt;</span><span class="n">DX9TextureFace</span><span class="o">&gt;&amp;</span> <span class="n">face</span> <span class="o">=</span> <span class="n">mFileTextureData</span><span class="o">-&gt;</span><span class="n">mFaces</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="n">data</span><span class="o">-&gt;</span><span class="n">Unserialize</span><span class="p">(</span><span class="n">NST</span><span class="p">(</span><span class="s">&quot;Levels&quot;</span><span class="p">),</span> <span class="n">face</span><span class="o">-&gt;</span><span class="n">mLevels</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">////////////////////////////////////////////////////////////////////////////////////////////////////</span>
<span class="kt">void</span> <span class="n">DX9FileTexture2D</span><span class="o">::</span><span class="n">PostUnserialize</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">NS_POSTUNSERIALIZE_PARENT</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="metadata">
<h1>Metadata</h1>
<p>By default components are serialized with metadata information. The metadata is extra information useful for debugging purposes or for exporting serialized data to other formats like xml for example. With metadata actived the serialization and unserialization process is more robuts because a lot more checks are performed.</p>
<p>It is recommended that your optimized serialized data do not include metadata. Without metadata your files will be smaller and the load times will be faster.</p>
<div class="highlight"><pre><span></span><span class="n">sm</span><span class="o">-&gt;</span><span class="n">SerializeBegin</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">SerializeOption_DisableMetaData</span><span class="p">);</span>
</pre></div>
<p>The unserialization process will detect automatically the metadata. You do not have to pass any extra information. But if you want to ignore the metadata even when it is stored in the stream you have to force it</p>
<div class="highlight"><pre><span></span><span class="n">sm</span><span class="o">-&gt;</span><span class="n">UnserializeBegin</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">UnserializeOption_IgnoreMetaData</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="endianess">
<h1>Endianess</h1>
<p>By default, the serialization is done with the endianess of the platform that is serializing. You can force the other endianess with the SerializeOption_SwapEndian flag</p>
<div class="highlight"><pre><span></span><span class="n">sm</span><span class="o">-&gt;</span><span class="n">SerializeBegin</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">SerializeOption_SwapEndian</span><span class="p">);</span>
</pre></div>
<p>The unserialization process will detect automatically the endianess of the source data. If the endianess do not match with the platform it will be converted. This is a slow process so it is recommended that you save your data prepared for the correct endianess.</p>
</div>


        <!-- NOESIS WEB ------- BEGIN ------- -->

                            </div> <!-- eo noesis_doc_content -->
                        </div> <!-- eo doc_wrap -->
                    </div> <!-- eo noesis_web_contenidosMain -->

                </div> <!-- eo wrapper -->

            </div>  <!-- eo documentation-article -->

        </div> <!-- eo main-content -->

        <footer id="footer" class="SOZO-footer">
            <div class="wrapper">
                <ul class="footer social-icon-list">
                    <li>
                        <a href="https://twitter.com/noesisengine" title="Noesis Twitter" target="_blank">
                            <i class="svg-icon">
                                <svg class="icon-social-twitter">
                                    <use xlink:href="#svg-icon-social-twitter"></use>
                                </svg>
                            </i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.linkedin.com/company/noesis-technologies-sl" title="Noesis Linkedin" target="_blank">
                            <i class="svg-icon">
                                <svg class="icon-social-linkedin">
                                    <use xlink:href="#svg-icon-social-linkedin"></use>
                                </svg>
                            </i>
                        </a>
                    </li>
                    <li>
                        <a href="https://vimeo.com/noesisengine" title="Noesis Vimeo" target="_blank">
                            <i class="svg-icon">
                                <svg class="icon-social-vimeo">
                                    <use xlink:href="#svg-icon-social-vimeo"></use>
                                </svg>
                            </i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.youtube.com/user/NoesisTechnologies" title="Noesis Youtube" target="_blank">
                            <i class="svg-icon">
                                <svg class="icon-social-youtube">
                                    <use xlink:href="#svg-icon-social-youtube"></use>
                                </svg>
                            </i>
                        </a>
                    </li>
                </ul>

                <div class="footer-extended">

                    <div class="cols">

                        <nav class="unit">
                            <h3 class="title">home</h3>
                            <ul>
                                <li><a href="/#goto-home-main-features" class="goto" title="NoesisGUI Main Features">Features</a></li>
                                <li><a href="/#goto-home-apis" class="goto" title="NoesisGUI APIs and Integrations">Integrations</a></li>
                                <li><a href="/#goto-home-platforms" class="goto" title="NoesisGUI Supported Platforms">Platforms</a></li>
                                <li><a href="/#goto-home-clients" class="goto" title="NoesisGUI Happy Clients">Clients</a></li>
                            </ul>
                        </nav>

                        <nav class="unit">
                            <h3 class="title">Licensing</h3>
                            <ul>
                                <li><a href="/licensing.php#goto-licensing-prices" class="goto" title="NoesisGUI Prices">Prices</a></li>
                                <li><a href="/licensing.php#goto-licensing-faqs" class="goto" title="NoesisGUI Licensing FAqs">FAQs</a></li>
                            </ul>
                        </nav>

                        <nav class="unit">
                            <h3 class="title">Developers</h3>
                            <ul>
                                <li>
                                    <div style="display:block;padding: 0.4em 0;">
                                        <a href="/forums" class="goto" title="NoesisGUI Forums" style="display:inline;margin-right:1em;">Forums</a>
                                        <a href="https://bugs.noesisengine.com" class="goto" target="_blank" rel="nofollow" title="NoesisGUI Bug Tracker"style="display:inline;">Bugtracker</a>
                                    </div>
                                </li>
                                <li>
                                    <div style="display:block;padding: 0.4em 0;">
                                        <a href="/developers/samples.php" class="goto" title="NoesisGUI Samples and Tutorials"style="display:inline;margin-right:1em;">Samples</a>
                                        <a href="/developers/downloads.php" class="goto" title="NoesisGUI Downloads" style="display:inline;">Downloads</a>
                                    </div>
                                </li>
                                <li>
                                    <div style="display:block;padding: 0.4em 0;">
                                        <a href="https://trello.com/b/ktVkZaBG/noesisgui" class="goto" target="_blank" rel="nofollow" title="NoesisGUI Roadmap"style="display:inline;margin-right:1em;">Roadmap</a>
                                        <a href="/docs/Gui.Core.Changelog.html" class="goto" title="NoesisGUI Version Changelog"style="display:inline;">Changelog</a>
                                    </div>
                                </li>
                                <li>
                                    <a href="/docs/Gui.Core.Index.html" class="goto" title="NoesisGUI Documentation">Documentation</a>
                                </li>
                            </ul>
                        </nav>

                        <nav class="unit">
                            <h3 class="title">Contact</h3>
                            <ul>
                                <li><a href="/contact.php#goto-contact-about" class="goto" title="About Noesis">About</a></li>
                                <li><a href="/contact.php#goto-contact-details" class="goto" title="Contact Noesis">Contact details</a></li>
                            </ul>
                        </nav>

                    </div>

                    <nav class="legal">
                        <figure class="SOZO-media logo">
                            <img src="/images/logos/noesis-logo-stacked.png">
                        </figure>
                        <p>&copy; 2017 Noesis Technologies</p>
                        <a href="/legal/privacy.php" title="Privacy Policy" rel="nofollow">Privacy</a>
                        <a href="/legal/cookies.php" title="Cookie Policy" rel="nofollow">Cookies</a>
                        <a href="/legal/terms-of-use.php" title="Terms and Conditions" rel="nofollow">Terms &amp; Conditions</a>
                    </nav>

                </div>

                <div class="footer-reduced">
                    <ul>
                        <li><a href="/" class="goto" title="NoesisGUI Main Features">Features</a></li>
                        <li><a href="/licensing.php" class="goto" title="NoesisGUI Prices">Licensing</a></li>
                        <li><a href="/forums" class="goto" title="NoesisGUI Forums">Developer</a></li>
                        <li><a href="/contact.php" class="goto" title="NoesisGUI Prices">Contact</a></li>
                    </ul>
                    <ul class="copyright-legal">
                        <li>&copy; 2017 Noesis Technologies</li>
                        <li><a href="/legal/privacy.php" title="Privacy Policy" rel="nofollow">Privacy</a></li>
                        <li><a href="/legal/terms-of-use.php" title="Terms and Conditions" rel="nofollow">Terms &amp; Conditions</a></li>
                    </ul>
                </div>
            </div>
        </footer>

        <footer id="doc-footer">
            <span>&copy; 2017 Noesis Technologies</span>
        </footer>

    </div> <!-- eo developers documentation -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!-- Use if you want latest version of 1x -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> -->

    <!-- If using 1.11.3 make sure you update the fallback file below to 1.11.3 -->
    <script>window.jQuery || document.write('<script src="/js/vendor/jquery.js"><\/script>')</script>

    <script src="/js/plugins.1481882071.js"></script><script src="/js/main.1485346364.js"></script>

    <!-- NOESIS WEB ------- END ------- -->


</div>
</body>
</html>
